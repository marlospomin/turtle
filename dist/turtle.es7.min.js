const images=document.querySelectorAll('.turtle'),config={rootMargin:'50px 0px',threshold:0};export default function(){function a(a){return new Promise((b,c)=>{const d=new Image;d.src=a,d.onload=b,d.onerror=c})}function b(b){const c=b.dataset.src;return c?a(c).then(()=>{e(b,c)}):void 0}function c(){f&&f.disconnect()}function d(a){0===g&&c(),a.forEach((a)=>{0<a.intersectionRatio&&(g--,f.unobserve(a.target),b(a.target))})}function e(a,b){a.classList.add('turle--handled'),a.src=b}let f,g=images.length;'IntersectionObserver'in window?function(a){f=new IntersectionObserver(d,config),a.forEach((a)=>{a.classList.contains('turtle--handled')||f.observe(a)})}(images):function(a){a.forEach((a)=>{b(a)})}(images)}